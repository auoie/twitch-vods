datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model streams {
  id                      String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  streamer_id             String
  stream_id               String      @unique
  start_time              DateTime
  max_views               BigInt
  last_updated_at         DateTime
  streamer_login_at_start String
  recordings              recordings?

  @@index([streamer_id, start_time(sort: Desc)])
}

model recordings {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  fetched_at    DateTime
  gzipped_bytes Bytes
  stream        streams  @relation(fields: [streams_id], references: [id])
  streams_id    String   @unique @db.Uuid
}
